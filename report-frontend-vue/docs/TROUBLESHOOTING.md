# TROUBLESHOOTING.md

## –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ —Å–ø–æ—Å–æ–±—ã –∏—Ö —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è

### 1. –û—à–∏–±–∫–∞ 404 / 405 –Ω–∞ API

**–°–∏–º–ø—Ç–æ–º—ã:**

- –í dev: –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ `/api/*` –ø–∞–¥–∞—é—Ç 404.
- –í prod: –∞–¥—Ä–µ—Å–∞ –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ `/api/api/*` –∏–ª–∏ —Ç–µ—Ä—è—é—Ç —Å–µ–≥–º–µ–Ω—Ç `/dtj/ind`.

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**

1. –í `.env.development` –ø—Ä–æ–≤–µ—Ä—å:
   - `VITE_PROXY_TARGET=http://45.8.116.32` (–∏–ª–∏ –¥—Ä—É–≥–æ–π —Ä–µ–∞–ª—å–Ω—ã–π backend).
   - –í—Å–µ `VITE_*_API_BASE` –∏ `VITE_FIELD_DICTIONARY_URL` –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `/` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/api`, `/dtj/api/report`, `/dtj/api/objects`).
   - –ó–Ω–∞—á–µ–Ω–∏—è –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –¥–≤–æ–π–Ω—ã—Ö `/api/api` –∏ –Ω–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –ª–∏—à–Ω–∏–º `/`.
2. –í dev:
   - –û—Ç–∫—Ä–æ–π –≤–∫–ª–∞–¥–∫—É **Network**: –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –∏–¥—Ç–∏ –Ω–∞ `http://localhost:5173/api/...` (—Ç–æ—Ç –∂–µ origin, –≥–¥–µ –∫—Ä—É—Ç–∏—Ç—Å—è Vite).  
     Vite –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç —ç—Ç–∏ –ø—É—Ç–∏ –Ω–∞ `VITE_PROXY_TARGET`.
   - –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å —É—à—ë–ª —Å—Ä–∞–∑—É –Ω–∞ `http://45.8.116.32/...` ‚Äî base URL –∑–∞–¥–∞–Ω –∞–±—Å–æ–ª—é—Ç–Ω—ã–º –∏ –ø—Ä–æ–∫—Å–∏ –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç.
3. –í prod (`npm run build && npm run preview`):
   - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ–∫—Å–∏. –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `http proxy error: /api (ECONNREFUSED localhost:8080)`.  
     –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –µ—Å—Ç—å ‚Äî `VITE_PROXY_TARGET` –Ω–µ –∑–∞–¥–∞–Ω –≤ `.env.production`.
   - –ï—Å–ª–∏ –≤ URL –≤–∏–¥–Ω–æ `.../api/api` ‚Äî —É–±–µ—Ä–∏ –ª–∏—à–Ω–∏–π —Å–µ–≥–º–µ–Ω—Ç –∏–∑ `.env`.

---

### 2. CORS –≤ dev

**–°–∏–º–ø—Ç–æ–º—ã:** –±—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã, –ø–∏—à–µ—Ç `CORS error` –≤ –∫–æ–Ω—Å–æ–ª–∏.

**–ü—Ä–∏—á–∏–Ω–∞:** –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ `http://45.8.116.32`, –º–∏–Ω—É—è Vite proxy (–∏–∑-–∑–∞ –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ `VITE_*_BASE` –∏–ª–∏ –ø—É—Å—Ç–æ–≥–æ `VITE_PROXY_TARGET`).

**–†–µ—à–µ–Ω–∏–µ:**

- –û—Å—Ç–∞–≤—å –≤ `.env.development` –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ (`/api`, `/dtj/api/*`, `/auth`, `/userapi`, `/userinfo`) –∏ –∑–∞–¥–∞–π `VITE_PROXY_TARGET=http://45.8.116.32`.
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤ –∫–æ–¥–µ —Ç–æ–∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `api.post('/plan', ...)`).
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ `npm run dev`.
- –î–ª—è —Å–ª–æ–≤–∞—Ä—è –ø–æ–ª–µ–π —É–∫–∞–∂–∏ `VITE_FIELD_DICTIONARY_URL=/dtj/api/client` (–±–µ–∑ origin). –í dev –∞–±—Å–æ–ª—é—Ç–Ω—ã–π URL –Ω–µ –ø—Ä–æ–π–¥—ë—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ –∏ –±—Ä–∞—É–∑–µ—Ä –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å.

---

### 3. –û—à–∏–±–∫–∞ –ª–æ–≥–∏–Ω–∞

**–°–∏–º–ø—Ç–æ–º—ã:**

- –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –ª–æ–≥–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ ¬´–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞¬ª –∏–ª–∏ –ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç.

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**

1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `VITE_AUTH_BASE_URL` –∏ `VITE_AUTH_DEV_PROXY_BASE`:
   - –í dev: `VITE_AUTH_BASE_URL=/`, `VITE_AUTH_DEV_PROXY_BASE=/auth`, —á—Ç–æ–±—ã Vite –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–ª `/auth/*` –Ω–∞ `VITE_PROXY_TARGET`.
   - –í prod: `VITE_AUTH_BASE_URL` –º–æ–∂–µ—Ç –±—ã—Ç—å `/` (–µ—Å–ª–∏ —Ñ—Ä–æ–Ω—Ç –∏ –±—ç–∫ –Ω–∞ –æ–¥–Ω–æ–º –¥–æ–º–µ–Ω–µ) –ª–∏–±–æ –∞–±—Å–æ–ª—é—Ç–Ω—ã–º `http://45.8.116.32` (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–¥—Ç–∏ –Ω–∞–ø—Ä—è–º—É—é).
   - –ï—Å–ª–∏ backend –æ–∂–∏–¥–∞–µ—Ç –ª–æ–≥–∏–Ω –ø–æ –¥—Ä—É–≥–æ–º—É –ø—É—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä `/dtj/nsi/auth/login`), –¥–æ–±–∞–≤—å —ç—Ç–æ—Ç –ø—Ä–µ—Ñ–∏–∫—Å –≤ `VITE_AUTH_BASE_URL`.
2. –ü—Ä–æ–≤–µ—Ä—å –æ—Ç–≤–µ—Ç –±—ç–∫–µ–Ω–¥–∞: –≤ —Ç–µ–∫—É—â–µ–º –∫–æ–¥–µ login –∂–¥—ë—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–µ `"ok"`.
   - –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON ‚Üí –ø–æ–ø—Ä–∞–≤—å –±—ç–∫–µ–Ω–¥ –∏–ª–∏ –∞–¥–∞–ø—Ç–µ—Ä –ª–æ–≥–∏–Ω–∞.

---

### 4. RPC –ø–∞–¥–∞–µ—Ç —Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º –º–µ—Ç–æ–¥–æ–º

**–°–∏–º–ø—Ç–æ–º—ã:** –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–π –≤–∏–¥–∞ `rpc('loadTypesObjects', {...})` –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫–∞ ¬´unknown method¬ª.

**–ü—Ä–∏—á–∏–Ω–∞:** –±–∞–∑–æ–≤—ã–π URL (`VITE_REPORT_API_BASE`, `VITE_PLAN_API_BASE`, `VITE_INSPECTION_API_BASE`, `VITE_OBJECTS_API_BASE` –∏ —Ç.–ø.) —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ –Ω–∞ —Ç–æ—Ç endpoint.

**–†–µ—à–µ–Ω–∏–µ:**

- –í dev: –∑–Ω–∞—á–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `/dtj/...` (–±–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞), —á—Ç–æ–±—ã –∑–∞–ø—Ä–æ—Å—ã —à–ª–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏.
- –í prod: –µ—Å–ª–∏ —Ñ—Ä–æ–Ω—Ç –∂–∏–≤—ë—Ç –Ω–∞ —Ç–æ–º –∂–µ –¥–æ–º–µ–Ω–µ, –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏. –ï—Å–ª–∏ —Ñ—Ä–æ–Ω—Ç –±—É–¥–µ—Ç –Ω–∞ –¥—Ä—É–≥–æ–º —Ö–æ—Å—Ç–µ ‚Äî —É–∫–∞–∂–∏ –ø–æ–ª–Ω—ã–π `http://45.8.116.32/dtj/...`.
- –°–≤–µ—Ä—å, —á—Ç–æ –ø—É—Ç—å —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–º, —á—Ç–æ –∂–¥—ë—Ç backend (–Ω–∞–ø—Ä–∏–º–µ—Ä, `report/loadReportConfiguration` –¥–æ–ª–∂–µ–Ω –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –Ω–∞ `/dtj/api/report`).

---

### 5. Failed to resolve import

**–°–∏–º–ø—Ç–æ–º—ã:** –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω, –≤ –∫–æ–Ω—Å–æ–ª–∏ –æ—à–∏–±–∫–∞ `Failed to resolve import "..."`.

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**

- –°–≤–µ—Ä—å alias –≤ `vite.config.ts` (—Ä–∞–∑–¥–µ–ª `resolve.alias`).
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ –∏–º–ø–æ—Ä—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä:
  ```ts
  import { api } from '@shared/api'
  ```
- –ï—Å–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—à—å –ø–∞–ø–∫—É ‚Äî –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ –µ—Å—Ç—å `index.ts` (barrel-—Ñ–∞–π–ª).

---

### 6. –ë–µ–ª—ã–π —ç–∫—Ä–∞–Ω –±–µ–∑ –æ—à–∏–±–æ–∫

**–°–∏–º–ø—Ç–æ–º—ã:** –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ‚Äî –ø—É—Å—Ç–æ–π —ç–∫—Ä–∞–Ω.

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**

1. –ö–æ–Ω—Å–æ–ª—å DevTools: –Ω–µ—Ç –ª–∏ –æ—à–∏–±–æ–∫ Vue (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ –Ω–∞–π–¥–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç).
2. Network: –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ª–∏ –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/api/data/loadTypesObjects`).
3. –ü–æ—Å–ª–µ –º—É—Ç–∞—Ü–∏–∏ (create/update/delete) ‚Äî –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ª–∏ –∫—ç—à Vue Query (–∏–Ω–∞—á–µ UI –Ω–µ –ø–µ—Ä–µ—Ä–∏—Å—É–µ—Ç—Å—è).

---

### 7. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

- **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å baseURL:** –≤ `src/shared/api/httpClient.ts` –ø–æ—Å–º–æ—Ç—Ä–∏ `resolveBaseURL()`.
- **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å login:** –≤ `src/features/auth/model/login.ts` —É–±–µ–¥–∏—Å—å, —á—Ç–æ –ø—É—Ç—å —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `.env`.
- **–õ–æ–≥–∏ Vite:** –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ `npm run dev` –≤ –∫–æ–Ω—Å–æ–ª–∏ –≤–∏–¥–Ω–æ, –∫—É–¥–∞ –ø—Ä–æ–∫—Å–∏—Ä—É—é—Ç—Å—è –∑–∞–ø—Ä–æ—Å—ã `/api`.
- **Network ‚Üí Headers:** —Å–º–æ—Ç—Ä–∏ `Request URL` –∏ `Response`.

---

### 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ prod —Å–±–æ—Ä–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ

**–°–∏–º–ø—Ç–æ–º—ã:** –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —Å–æ–±—Ä–∞–Ω–Ω—ã–π `dist/` –Ω–∞ 45.8.116.32, –∞ –Ω–∞ `npm run preview` –∑–∞–ø—Ä–æ—Å—ã –±—å—é—Ç –≤ `localhost:8080`.

**–†–µ—à–µ–Ω–∏–µ:**

1. –í `.env.production` –æ—Å—Ç–∞–≤—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ (`/api`, `/dtj/api/*`, `/auth`, `/userapi`, `/userinfo`) –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–¥–∞–π `VITE_PROXY_TARGET=http://45.8.116.32`.
   - Front –≤ prod –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ —Ç–µ–º –∂–µ –ø—É—Ç—è–º, —á—Ç–æ –∏ backend, –∞ Vite `dev`/`preview` –ø—Ä–æ–∫—Å–∏—Ä—É—é—Ç –∏—Ö –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ö–æ—Å—Ç, –ø–æ—ç—Ç–æ–º—É CORS –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç.
2. –í—ã–ø–æ–ª–Ω–∏ `npm run build && npm run preview -- --host 0.0.0.0 --port 4173` –∏ –æ—Ç–∫—Ä–æ–π `http://localhost:4173/`.
   - –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `http proxy error: /api (ECONNREFUSED localhost:8080)`. –ï—Å–ª–∏ –æ—à–∏–±–∫–∏ –µ—Å—Ç—å ‚Äî –ø—Ä–æ–≤–µ—Ä—å `VITE_PROXY_TARGET`.
3. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Å—è –∏ –ø—Ä–æ–≤–µ—Ä—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã: –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã `/api`, `/dtj/*`, `/auth`, `/userapi`, `/userinfo` –±—É–¥—É—Ç —Ö–æ–¥–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π backend —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏.
4. –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–æ–∂–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `dist/` –Ω–∞ —Å–µ—Ä–≤–µ—Ä ‚Äî —Ç–∞–º —ç—Ç–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –±—É–¥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è —Å–∞–º–∏–º backend'–æ–º, –ø–æ—ç—Ç–æ–º—É –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–∫—Å–∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

---

üìå –°–æ–≤–µ—Ç: –¥–µ—Ä–∂–∏ –ø–æ–¥ —Ä—É–∫–æ–π `.env.example`, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∏ —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç, —á—Ç–æ–±—ã –Ω–∞—Ö–æ–¥–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–æ–±–ª–µ–º.
